---
layout: post
title: "线程安全性"
date: 2016-08-07 14:19:01
categories: 读书
---

##  线程安全性
线程安全性的出现是由于多线程的并发访问引出的问题，首先需要知道多线程的程序是怎样执行的，也就是需要知道jvm模型

![jvm](/public/img/JVM.png)

可以看到线程之间
局部变量是分别有一份，相互无干扰，但对于堆内存的数据，他们是共享的，所以需要处理这种竞争关系，示意图如下：

![共享](/public/img/thread_share.png)

还有一个原因：
为了优化程序执行效率，引入了重排序的功能，这个在多线程中也会影响并发执行。java内存模型中专门定义了happens-before规则来定义顺序

![偏序](/public/img/happens-before.png)


